vcluster:
  # 1. Distro & Control Plane
  controlPlane:
    distro:
      k3s:
        enabled: true
    statefulSet:
      persistence:
        volumeClaim:
          enabled: true
          size: 5Gi

  # 2. Proxy (Needs to be a sibling of controlPlane)
  proxy:
    extraSANs:
      - "{{ .Values.appName }}.{{ .Values.teamName }}.workloads.example.com"

  # 3. Ingress (Top level under vcluster, NOT inside controlPlane)
  ingress:
    enabled: true
    host: "{{ .Values.appName }}.{{ .Values.teamName }}.workloads.example.com"
    annotations:
      kubernetes.io/ingress.class: "traefik"
      cert-manager.io/cluster-issuer: "internal-ca-issuer"
      traefik.ingress.kubernetes.io/router.entrypoints: "websecure"
    spec:
      tls:
        - secretName: "tls-{{ .Values.appName }}-vcluster"
          hosts:
            - "{{ .Values.appName }}.{{ .Values.teamName }}.workloads.example.com"

  # 4. Sync Settings
  sync:
    fromHost:
      nodes:
        enabled: false
    toHost:
      services:
        enabled: true
      ingresses:
        enabled: false

  # 5. KubeConfig Export
  exportKubeConfig:
    secret:
      name: "vc-{{ .Release.Name }}-config"